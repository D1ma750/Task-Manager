{% extends 'core/base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>üìã –í—Å–µ –∑–∞–¥–∞—á–∏</h1>
    <div>
        <a href="/tasks/create/" class="btn btn-success me-2">
            ‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
        </a>
        <a href="/" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>–ö–æ–¥</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                <th>–°—Ä–æ–∫</th>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td><strong>{{ task.task_code }}</strong></td>
                <td>{{ task.title }}</td>
                <td>
                    <span class="badge
                        {% if task.status == 'done' %}bg-success
                        {% elif task.status == 'in_progress' %}bg-primary
                        {% elif task.status == 'review' %}bg-warning
                        {% else %}bg-secondary{% endif %}">
                        {{ task.status }}
                    </span>
                </td>
                <td>
                    <span class="badge
                        {% if task.priority == 'high' %}bg-danger
                        {% elif task.priority == 'medium' %}bg-warning
                        {% else %}bg-info{% endif %}">
                        {{ task.priority }}
                    </span>
                </td>
                <td>{{ task.due_date }}</td>
                <td>
                    <span class="badge bg-dark">{{ task.employee_count }}</span>
                </td>
                <td>
                    <a href="/tasks/{{ task.id }}/" class="btn btn-sm btn-outline-primary">üëÅÔ∏è</a>
                    <form method="POST" action="/tasks/{{ task.id }}/delete/" class="d-inline"
                          onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É ¬´{{ task.title }}¬ª?')">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-outline-danger">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}